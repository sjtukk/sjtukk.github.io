---
layout:     post
date:       2022-4-14
author:     "kk"
title: "C++基础"
header-style: text
tags:
  - 面试
---



- linux中，一切皆文件。Linux下我们可以把普通文件，文件夹，socket，管道，设备等都看成是文件，可以直接用相同的API（open/write/read/close）对其进行读写操作。而windows下，不同的设备可能有不同的调用方式。而在Linux下，所有的东西都被抽象成了文件，统一使用文件的来进行操作

- 文件描述符是对每一个打开的文件独一无二的标识符（非负整数）。内核持有一个全局文件表，里面描述了文件的访问权限信息

  一个进程有三类文件描述符，分别是standard input，standard output，standard error，每一类下记录着打开的文件。可以cd /proc/PID/fd 查看

![File descriptor diagram](https://www.computerhope.com/jargon/f/file-descriptor.jpg)

- OS的kernel负责资源的调度（比如cpu、内存、硬件IO等），linux中只有ring 0，与ring 3。ring 0 对应核心态，ring 3对应用户态。用户态执行trap指令会进入内核态。另外出现中断和异常的时候也会进入内核态。

  用户态可以执行的指令：读/写该进程用户空间的内存，算术运算、读时钟等

  核心态的指令：清内存、置时钟、分配系统资源、修改虚存的段表和页表，修改用户的访问权限等

​	   因为内核负责进程的调度，所以进程的描述信息—PCB块是存放在内核空间里的，每一个进程在内核空间中也会有。

​	   每个进程被创建的时候，在生成进程描述符task_struct的同时，会生成两个栈，一个是用户栈，位于用户地址空间；一个是内核栈，位于内核空间。当进程在用户地址空间中执行的时候，使用的是用户栈，CPU堆栈指针寄存器中存的是用户栈的地址；同理，当进程在内核空间执行时，CPU堆栈指针寄存器中放的是内核栈的地址。

- 进程间通信

  - 管道
    1. 其本质是一个伪文件(实为内核缓冲区)
    2. 由两个文件描述符引用，一个表示读端，一个表示写端。
    3. 规定数据从管道的写端流入管道，从读端流出
  - 信号量
    1. 实质上是一个计数器
    2. 用于进程同步

  - 共享内存
    1. 两个或多个进程共享一个给定的存储区
    2. 信号量一般与共享内存一起使用，信号量用来同步对共享内存的访问
  - 消息队列
